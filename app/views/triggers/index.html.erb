<%- breadcrum t(".triggers") -%>

<div class="alert alert-info" role='alert'>
  <button type="button" class="close" data-dismiss="alert" aria-label='Close'>&times;</button>
  <%= t('triggers.index.delay_warning', minutes: 5) %>
</div>

<table id='mailingtable' class="table table-striped">
  <thead>
    <tr>
      <th><%= t('.event') %></th>
      <th><%= t('.filters') %></th>
      <th><%= t('.deliver_templates_on') %></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
  <% @triggers.each do |trigger| %>
    <tr>
      <td><%= t("triggers.new.event.#{trigger.event_name}") %></td>
      <td><%= trigger.filters.map{|f| "#{translate_key(f.key)}=#{t("set_options.#{f.value}")}" }.join('; ') %></td>
      <td><%= trigger.templates_triggerses.map{|tt|"#{tt.template.name} (#{explain_offset(tt)})"}.join(',') %></td>
      <td class='text-right'>
        <%= link_to t('destroy'), trigger_path(trigger), :method => :delete, :confirm => t('confirm'), :class => 'btn btn-sm btn-danger' %>
      </td>
    </tr>
  <% end %>
  </tbody>
</table>
<%= link_to t('new'), new_trigger_path, :class => 'btn btn-primary' %>