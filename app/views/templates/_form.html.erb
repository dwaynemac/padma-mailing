<div class="control-group">
  Name
  <div class="controls template_fields" id="template_name" data-mercury="full" tabindex="0">
    <%= @template.name unless @template.name.nil? %>
  </div>
</div>

<div class="control-group">
  Description
  <div class="controls template_fields" id="template_description" data-mercury="full" tabindex="0">
    <%= @template.description unless @template.description.nil? %>
  </div>
</div>

<div class="control-group">
  Subject
  <div class="controls template_fields" id="template_subject" data-mercury="full" tabindex="0">
    <%= @template.subject unless @template.subject.nil? %>
  </div>
</div>

<div class="control-group">
  Content
  <div class="controls template_textarea" id="template_content" data-mercury="full">
    <%= @template.content.html_safe unless @template.content.nil? %>
  </div>
</div>

<%= form_for @template, :html => { :multipart => true } do |f| %>
    <%= f.fields_for :attachments do |attachment| %>
        <% if attachment.object.new_record? %>
            <p>
                <%= attachment.file_field :attachment %>
            </p>
        <% end %>
    <% end %>

    <%= f.fields_for :attachments do |attachment| %>
        <% unless attachment.object.new_record? %>
            <p>
              <%= attachment.object.attachment.url %>
              <%= attachment.check_box :_destroy %>
            </p>
        <% end %>
    <% end %>
<% end %>

<% if @template.id.nil? %>
    <%= link_to 'Edit', "/editor" + new_template_path,
                id:"edit_link",
                data: {save_url: mercury_create_templates_path},
                class: 'btn btn-mini' %>
<% else %>
    <%= link_to 'Edit', "/editor" + edit_template_path(@template),
                id:"edit_link",
                data: {save_url: mercury_update_template_path(@template)},
                class: 'btn btn-mini' %>
<% end %>